{% extends "base.html" %}

{% block title %}Branches - iTech Computer Institute{% endblock %}

{% block extra_css %}
<style>
    /* Branch page specific styles using main theme variables */
    .branches-container {
        padding: 2rem 0;
    }

    .page-header {
        text-align: center;
        margin-bottom: 3rem;
        padding: 3rem 0;
        background: var(--gradient);
        color: white;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
        position: relative;
    }

    .page-header::after {
        content: "";
        position: absolute;
        left: 0; right: 0; bottom: 0;
        height: 20px;
        background: linear-gradient(to top, var(--background-color), transparent);
        z-index: 1;
    }

    .page-title {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        font-weight: 700;
        letter-spacing: 1px;
        text-shadow: 0 2px 12px rgba(44,62,80,0.18);
    }

    .page-subtitle {
        font-size: 1.2rem;
        color: rgba(255, 255, 255, 0.9);
        text-shadow: 0 1px 6px rgba(44,62,80,0.12);
        margin-bottom: 1.5rem;
    }

    .add-branch-btn {
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 0.8rem 1.5rem;
        border-radius: var(--border-radius);
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
    }

    .add-branch-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
    }

    .branches-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
    }

    .branch-card {
        background: var(--card-bg);
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
        padding: 2rem;
        position: relative;
        transition: transform 0.3s, box-shadow 0.3s;
        border: 1px solid rgba(44,62,80,0.06);
        overflow: hidden;
    }

    .branch-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient);
    }

    .branch-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 12px 32px rgba(44,62,80,0.18);
    }

    .delete-branch-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: var(--accent-color);
        border: none;
        color: white;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }

    .delete-branch-btn:hover {
        background: #c0392b;
        transform: scale(1.1);
    }

    .branch-status {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.4rem 0.8rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        margin-bottom: 1rem;
        background: linear-gradient(135deg, #27ae60, #2ecc71);
        color: white;
    }

    .branch-status.coming-soon {
        background: linear-gradient(135deg, #f39c12, #e67e22);
    }

    .branch-title {
        font-size: 1.4rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 1rem;
        letter-spacing: 0.5px;
    }

    .branch-address {
        font-size: 0.95rem;
        line-height: 1.6;
        color: var(--text-color);
        opacity: 0.8;
        margin-bottom: 1.5rem;
    }

    .branch-details {
        margin-bottom: 1.5rem;
    }

    .branch-detail-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
        color: var(--text-color);
        opacity: 0.8;
    }

    .branch-detail-item i {
        width: 20px;
        color: var(--primary-color);
    }

    .branch-actions {
        display: flex;
        gap: 0.8rem;
        flex-wrap: wrap;
    }

    .btn {
        padding: 0.8rem 1.2rem;
        border: none;
        border-radius: var(--border-radius);
        cursor: pointer;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        flex: 1;
        justify-content: center;
        text-decoration: none;
    }

    .btn-primary {
        background: var(--gradient);
        color: white;
        box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
    }

    .btn-primary:hover {
        background: var(--accent-color);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
    }

    .btn-secondary {
        background: rgba(52, 152, 219, 0.1);
        color: var(--primary-color);
        border: 2px solid rgba(52, 152, 219, 0.2);
    }

    .btn-secondary:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
    }

    /* Modal Styles */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        backdrop-filter: blur(5px);
    }

    .modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .modal-content {
        background: var(--card-bg);
        border-radius: var(--border-radius);
        padding: 2rem;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        position: relative;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid rgba(52, 152, 219, 0.1);
    }

    .modal-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-color);
    }

    .close-btn {
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--text-color);
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .close-btn:hover {
        color: var(--accent-color);
        transform: rotate(90deg);
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: var(--primary-color);
    }

    .form-control {
        width: 100%;
        padding: 1rem;
        border: 2px solid rgba(52, 152, 219, 0.2);
        border-radius: var(--border-radius);
        background: var(--background-color);
        color: var(--text-color);
        font-size: 1rem;
        transition: all 0.3s ease;
    }

    .form-control:focus {
        border-color: var(--primary-color);
        outline: none;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    .btn-submit {
        background: var(--gradient);
        color: white;
        padding: 1rem 2rem;
        border: none;
        border-radius: var(--border-radius);
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        width: 100%;
    }

    .btn-submit:hover {
        background: var(--accent-color);
        transform: translateY(-2px);
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
    }

    .success-message {
        background: linear-gradient(135deg, rgba(39, 174, 96, 0.1), rgba(46, 204, 113, 0.1));
        border-left: 4px solid #27ae60;
        color: #27ae60;
        padding: 1rem;
        border-radius: var(--border-radius);
        margin-bottom: 1rem;
        display: none;
        align-items: center;
        gap: 0.5rem;
    }

    @media (max-width: 768px) {
        .page-title {
            font-size: 2rem;
        }
        
        .branches-grid {
            grid-template-columns: 1fr;
            padding: 0 0.5rem;
        }
        
        .branch-actions {
            flex-direction: column;
        }
        
        .modal-content {
            margin: 1rem;
            padding: 1.5rem;
        }

        .form-row {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 480px) {
        .page-header {
            padding: 2rem 0;
        }
        
        .page-title {
            font-size: 1.8rem;
        }
        
        .branch-card {
            padding: 1.5rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container branches-container">
    <div class="page-header">
        <h1 class="page-title">üè¢ Our Branches</h1>
        <p class="page-subtitle">Discover our multiple locations offering quality computer education across the city</p>
        <button class="add-branch-btn" id="addBranchBtn">
            <i class="fas fa-plus"></i>
            Add New Branch
        </button>
    </div>

    <div class="branches-grid" id="branchesGrid">
        <!-- Branch 1 -->
        <div class="branch-card" data-branch-id="1">
            <button class="delete-branch-btn" onclick="deleteBranch(1)">
                <i class="fas fa-trash"></i>
            </button>
            <div class="branch-status">
                <i class="fas fa-check-circle"></i>
                Active
            </div>
            <h3 class="branch-title">Main Campus - Downtown</h3>
            <p class="branch-address">
                123 Tech Street, Downtown District, City - 110001<br>
                Near Metro Station, Above City Mall
            </p>
            <div class="branch-details">
                <div class="branch-detail-item">
                    <i class="fas fa-phone"></i>
                    <span>+91 98765 43210</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-envelope"></i>
                    <span>downtown@itech.edu</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-users"></i>
                    <span>500+ Students</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-desktop"></i>
                    <span>50 Computers</span>
                </div>
            </div>
            <div class="branch-actions">
                <button class="btn btn-primary" onclick="viewBranch('Main Campus - Downtown')">
                    <i class="fas fa-eye"></i>
                    View Details
                </button>
                <button class="btn btn-secondary" onclick="getDirections('Main Campus - Downtown')">
                    <i class="fas fa-map-marker-alt"></i>
                    Get Directions
                </button>
            </div>
        </div>

        <!-- Branch 2 -->
        <div class="branch-card" data-branch-id="2">
            <button class="delete-branch-btn" onclick="deleteBranch(2)">
                <i class="fas fa-trash"></i>
            </button>
            <div class="branch-status">
                <i class="fas fa-check-circle"></i>
                Active
            </div>
            <h3 class="branch-title">North Campus</h3>
            <p class="branch-address">
                456 Education Avenue, North District, City - 110002<br>
                Near University, Opposite Public Library
            </p>
            <div class="branch-details">
                <div class="branch-detail-item">
                    <i class="fas fa-phone"></i>
                    <span>+91 98765 43211</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-envelope"></i>
                    <span>north@itech.edu</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-users"></i>
                    <span>350+ Students</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-desktop"></i>
                    <span>35 Computers</span>
                </div>
            </div>
            <div class="branch-actions">
                <button class="btn btn-primary" onclick="viewBranch('North Campus')">
                    <i class="fas fa-eye"></i>
                    View Details
                </button>
                <button class="btn btn-secondary" onclick="getDirections('North Campus')">
                    <i class="fas fa-map-marker-alt"></i>
                    Get Directions
                </button>
            </div>
        </div>

        <!-- Branch 3 -->
        <div class="branch-card" data-branch-id="3">
            <button class="delete-branch-btn" onclick="deleteBranch(3)">
                <i class="fas fa-trash"></i>
            </button>
            <div class="branch-status">
                <i class="fas fa-check-circle"></i>
                Active
            </div>
            <h3 class="branch-title">South Campus</h3>
            <p class="branch-address">
                789 Innovation Park, South District, City - 110003<br>
                IT Hub Area, Next to Software Companies
            </p>
            <div class="branch-details">
                <div class="branch-detail-item">
                    <i class="fas fa-phone"></i>
                    <span>+91 98765 43212</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-envelope"></i>
                    <span>south@itech.edu</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-users"></i>
                    <span>400+ Students</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-desktop"></i>
                    <span>40 Computers</span>
                </div>
            </div>
            <div class="branch-actions">
                <button class="btn btn-primary" onclick="viewBranch('South Campus')">
                    <i class="fas fa-eye"></i>
                    View Details
                </button>
                <button class="btn btn-secondary" onclick="getDirections('South Campus')">
                    <i class="fas fa-map-marker-alt"></i>
                    Get Directions
                </button>
            </div>
        </div>

        <!-- Branch 4 -->
        <div class="branch-card" data-branch-id="4">
            <button class="delete-branch-btn" onclick="deleteBranch(4)">
                <i class="fas fa-trash"></i>
            </button>
            <div class="branch-status coming-soon">
                <i class="fas fa-clock"></i>
                Coming Soon
            </div>
            <h3 class="branch-title">West Campus</h3>
            <p class="branch-address">
                321 Business District, West Area, City - 110004<br>
                Commercial Complex, Near Shopping Mall
            </p>
            <div class="branch-details">
                <div class="branch-detail-item">
                    <i class="fas fa-phone"></i>
                    <span>+91 98765 43213</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-envelope"></i>
                    <span>west@itech.edu</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-calendar"></i>
                    <span>Opening March 2025</span>
                </div>
                <div class="branch-detail-item">
                    <i class="fas fa-desktop"></i>
                    <span>60 Computers</span>
                </div>
            </div>
            <div class="branch-actions">
                <button class="btn btn-primary" onclick="viewBranch('West Campus')">
                    <i class="fas fa-eye"></i>
                    View Details
                </button>
                <button class="btn btn-secondary" onclick="getDirections('West Campus')">
                    <i class="fas fa-bell"></i>
                    Get Notified
                </button>
            </div>
        </div>
    </div>

    <!-- Add Branch Modal -->
    <div id="addBranchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add New Branch</h2>
                <button class="close-btn" onclick="closeModal('addBranchModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="success-message" id="addBranchSuccess">
                    <i class="fas fa-check-circle"></i>
                    <span>Branch added successfully!</span>
                </div>
                
                <form id="addBranchForm">
                    <div class="form-group">
                        <label for="branchName">Branch Name *</label>
                        <input type="text" id="branchName" name="branchName" class="form-control" placeholder="Enter branch name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="branchAddress">Full Address *</label>
                        <textarea id="branchAddress" name="branchAddress" class="form-control" rows="3" placeholder="Enter complete address" required></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="branchPhone">Phone Number *</label>
                            <input type="tel" id="branchPhone" name="branchPhone" class="form-control" placeholder="+91 98765 43210" required>
                        </div>
                        <div class="form-group">
                            <label for="branchEmail">Email Address *</label>
                            <input type="email" id="branchEmail" name="branchEmail" class="form-control" placeholder="branch@itech.edu" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="branchStudents">Number of Students</label>
                            <input type="number" id="branchStudents" name="branchStudents" class="form-control" placeholder="e.g., 300" min="0">
                        </div>
                        <div class="form-group">
                            <label for="branchComputers">Number of Computers</label>
                            <input type="number" id="branchComputers" name="branchComputers" class="form-control" placeholder="e.g., 30" min="0">
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-submit">
                        <i class="fas fa-plus-circle"></i>
                        Add Branch
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
// Branch data for detailed view
const branchDetails = {
    'Main Campus - Downtown': {
        name: 'Main Campus - Downtown',
        address: '123 Tech Street, Downtown District, City - 110001',
        phone: '+91 98765 43210',
        email: 'downtown@itech.edu',
        students: '500+',
        computers: '50',
        status: 'Active',
        facilities: ['Wi-Fi', 'AC Classrooms', 'Parking', 'Cafeteria', 'Library'],
        courses: ['Basic Computer', 'Web Development', 'Programming', 'Digital Marketing']
    },
    'North Campus': {
        name: 'North Campus',
        address: '456 Education Avenue, North District, City - 110002',
        phone: '+91 98765 43211',
        email: 'north@itech.edu',
        students: '350+',
        computers: '35',
        status: 'Active',
        facilities: ['Wi-Fi', 'AC Classrooms', 'Parking', 'Library'],
        courses: ['Basic Computer', 'Programming', 'Graphic Design', 'Tally']
    },
    'South Campus': {
        name: 'South Campus',
        address: '789 Innovation Park, South District, City - 110003',
        phone: '+91 98765 43212',
        email: 'south@itech.edu',
        students: '400+',
        computers: '40',
        status: 'Active',
        facilities: ['Wi-Fi', 'AC Classrooms', 'Parking', 'Cafeteria'],
        courses: ['Web Development', 'Mobile App', 'Data Science', 'Digital Marketing']
    },
    'West Campus': {
        name: 'West Campus',
        address: '321 Business District, West Area, City - 110004',
        phone: '+91 98765 43213',
        email: 'west@itech.edu',
        students: 'Opening Soon',
        computers: '60',
        status: 'Coming Soon',
        facilities: ['Wi-Fi', 'AC Classrooms', 'Parking', 'Cafeteria', 'Library', 'Lab'],
        courses: ['All Courses Available']
    }
};

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    // Add Branch button event
    document.getElementById('addBranchBtn').addEventListener('click', function() {
        document.getElementById('addBranchModal').classList.add('active');
        document.body.style.overflow = 'hidden';
    });

    // Form submission
    document.getElementById('addBranchForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Show success message
        document.getElementById('addBranchSuccess').style.display = 'flex';
        
        // Reset form
        this.reset();
        
        // Hide success message after 3 seconds
        setTimeout(() => {
            document.getElementById('addBranchSuccess').style.display = 'none';
            closeModal('addBranchModal');
        }, 2000);
    });
});

// Function to view branch details
window.viewBranch = function(branchName) {
    const details = branchDetails[branchName];
    if (details) {
        alert(`Branch: ${details.name}\nAddress: ${details.address}\nPhone: ${details.phone}\nEmail: ${details.email}\nStatus: ${details.status}`);
    } else {
        alert('Branch details not available.');
    }
};

// Function to get directions
window.getDirections = function(branchName) {
    const details = branchDetails[branchName];
    if (details && details.address) {
        const encodedAddress = encodeURIComponent(details.address);
        window.open(`https://www.google.com/maps/search/?api=1&query=${encodedAddress}`, '_blank');
    } else {
        alert('Address information not available for this branch.');
    }
};

// Function to delete branch
window.deleteBranch = function(branchId) {
    if (confirm('Are you sure you want to delete this branch?')) {
        const branchCard = document.querySelector(`[data-branch-id="${branchId}"]`);
        if (branchCard) {
            branchCard.remove();
            alert('Branch deleted successfully!');
        }
    }
};

// Function to close modal
window.closeModal = function(modalId) {
    document.getElementById(modalId).classList.remove('active');
    document.body.style.overflow = 'auto';
};

// Close modal when clicking outside
document.querySelectorAll('.modal').forEach(modal => {
    modal.addEventListener('click', function(e) {
        if (e.target === this) {
            this.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
    });
});

// Escape key to close modals
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        document.querySelectorAll('.modal.active').forEach(modal => {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        });
    }
});
</script>
{% endblock %}
